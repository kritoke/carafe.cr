{"id":"carafe.cr-3ym","title":"Determine if liquid.cr for loop reverse feature is needed","description":"The for loop reverse feature breaks the Liquid spec. Investigate if this feature is actually needed or if we can remove it to avoid maintaining a separate fork of liquid.cr","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T20:24:17.662547-06:00","created_by":"kritoke","updated_at":"2026-01-07T20:24:17.662547-06:00"}
{"id":"carafe.cr-5u7","title":"Address TODO in src/config.cr:64","description":"TODO comment: 'Add support for Array(String)' needs to be implemented or removed","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:12.125667-06:00","created_by":"kritoke","updated_at":"2026-01-07T20:20:12.125667-06:00"}
{"id":"carafe.cr-8f9","title":"Use getter? for boolean fields","description":"src/liquid_blocks/highlight.cr:8 (linenos) and src/collection.cr:8 (output) should use getter? instead of getter for Bool fields","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:10.710959-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:32:59.713253-06:00","closed_at":"2026-01-08T04:32:59.713253-06:00","close_reason":"Closed"}
{"id":"carafe.cr-9mz","title":"Auto-inject TOC into page content (theme-compatible)","description":"The TOC include file approach won't work because _includes gets wiped when remote theme loads.\n\nTOC must be auto-injected into page content by carafe, similar to how Jekyll/Minimal Mistakes handles it.\n\n## Requirements\n1. Auto-inject TOC into rendered HTML content\n2. Work with remote themes (no custom includes needed)\n3. Only inject when toc: true in frontmatter\n4. Inject in correct position (sidebar/right side of content)\n\n## Implementation\n- Modify markdown processor to inject TOC HTML into content\n- TOC should appear in page flow without requiring theme changes","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-08T05:31:48.874718-06:00","created_by":"kritoke","updated_at":"2026-01-08T05:32:45.955203-06:00","closed_at":"2026-01-08T05:32:45.955203-06:00","close_reason":"Implemented auto-injection of TOC into page content. TOC now works with remote themes without requiring _includes modifications. Verified with Playwright showing correct positioning and navigation."}
{"id":"carafe.cr-9pf","title":"Fix block parameter names in src/processor/layout.cr","description":"Lines 320, 344, 395, 449 have single-letter block params (|r|, |hk|, |hv|) that need descriptive names","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:10.027798-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:31:49.440285-06:00","closed_at":"2026-01-08T04:31:49.440285-06:00","close_reason":"Closed"}
{"id":"carafe.cr-afx","title":"Fix single-letter block parameter names in spec files","description":"spec/plugins/remote_theme_spec.cr:58, spec/plugins/pagination_spec.cr:35, spec/plugins/lunr_spec.cr:37 - single letter params like |g| need descriptive names","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:09.795132-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:31:49.453481-06:00","closed_at":"2026-01-08T04:31:49.453481-06:00","close_reason":"Closed"}
{"id":"carafe.cr-b02","title":"Fix upper left corner of matthewrhone.dev test site","description":"The text in the upper left corner should have text under it. Likely CSS parsing issues causing layout problems.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T20:23:01.22466-06:00","created_by":"kritoke","updated_at":"2026-01-07T20:23:01.22466-06:00"}
{"id":"carafe.cr-b1h","title":"Fix stylings on test site matthewrhone.dev, it should have a dark mode","description":"Need to implement dark mode for carafe-based sites using remote themes.\n\nCRITICAL: Both _includes and assets directories get wiped when remote theme is fetched, so dark mode must be implemented as a carafe plugin that injects functionality without modifying theme files.\n\n## Approach\n1. Create carafe plugin for dark mode\n2. Plugin injects CSS and JS into pages\n3. No theme file modifications required\n4. Works with Minimal Mistakes and other themes\n5. Toggle button injected via plugin\n\n## Technical Implementation\n- Create src/plugins/carafe_dark_mode.cr\n- Inject CSS for dark mode styles\n- Inject JavaScript for toggle functionality  \n- Inject toggle button HTML in masthead/sidebar\n- Use localStorage to persist user preference\n- Support system preference detection\n\n## Testing\n- Use Playwright to verify against matthewrhone.dev\n- Test toggle functionality\n- Verify persistence across page loads\n- Test with minimal-mistakes skin","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-07T20:21:44.766505-06:00","created_by":"kritoke","updated_at":"2026-01-08T05:40:50.665575-06:00"}
{"id":"carafe.cr-bn0","title":"Address TODO in src/processor/sass.cr:48","description":"TODO comment: 'Render Liquid tags using the site context' needs to be implemented or removed","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:11.892879-06:00","created_by":"kritoke","updated_at":"2026-01-07T20:20:11.892879-06:00"}
{"id":"carafe.cr-cs4","title":"Remove excessive trailing newlines","description":"src/liquid_blocks/include.cr:226 and src/liquid/filters/jekyll.cr:173 have excessive trailing blank lines","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:10.957346-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:32:59.734569-06:00","closed_at":"2026-01-08T04:32:59.734569-06:00","close_reason":"Closed"}
{"id":"carafe.cr-cyt","title":"Address TODO in src/pipeline.cr:41","description":"TODO comment: 'Read processors' needs to be implemented or removed","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:12.606076-06:00","created_by":"kritoke","updated_at":"2026-01-07T20:20:12.606076-06:00"}
{"id":"carafe.cr-dym","title":"Remove test collection from matthewrhone.dev site","description":"Remove the test collection that was added to code resources in the test matthewrhone.dev site during debugging","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T20:36:31.388602-06:00","created_by":"kritoke","updated_at":"2026-01-07T20:36:31.388602-06:00"}
{"id":"carafe.cr-gj2","title":"Fix block parameter name in src/liquid_filters.cr:320","description":"Line 320 has single-letter block param |s| that needs a descriptive name","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:10.478472-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:31:49.449933-06:00","closed_at":"2026-01-08T04:31:49.449933-06:00","close_reason":"Closed"}
{"id":"carafe.cr-gx1","title":"Use reverse! for performance in layout.cr","description":"src/processor/layout.cr:395 should use reverse! instead of reverse for better performance after sort_by","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:11.192404-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:32:59.755777-06:00","closed_at":"2026-01-08T04:32:59.755777-06:00","close_reason":"Closed"}
{"id":"carafe.cr-hwb","title":"Remove redundant begin block in jekyll.cr","description":"src/liquid/filters/jekyll.cr:100 has a redundant begin block that should be removed","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:11.660753-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:32:59.796873-06:00","closed_at":"2026-01-08T04:32:59.796873-06:00","close_reason":"Closed"}
{"id":"carafe.cr-jht","title":"Fix formatting issues in multiple files (run crystal tool format)","description":"5 files have formatting issues that can be auto-fixed: src/liquid_blocks/highlight.cr, src/liquid_blocks/include.cr, src/plugins/remote_theme.cr, src/processor/layout.cr, src/processor/crinja.cr","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T20:19:45.043512-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:32:59.692548-06:00","closed_at":"2026-01-08T04:32:59.692548-06:00","close_reason":"Closed"}
{"id":"carafe.cr-jnc","title":"Remove updated date/time from about page in matthewrhone.dev","description":"The about page is showing an updated date/time but it's a page not a post, so this should be removed","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T20:38:42.42221-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:18:29.589114-06:00","closed_at":"2026-01-08T04:18:29.589117-06:00"}
{"id":"carafe.cr-mvu","title":"Fix social media links at bottom of page in matthewrhone.dev","description":"The social media links at the bottom of the page need to be fixed to match the example","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T04:16:12.886122-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:16:12.886122-06:00"}
{"id":"carafe.cr-qob","title":"Fix the lunr integration in the test site matthewrhone.dev","description":"The Lunr search integration is not working correctly on the matthewrhone.dev test site and needs to be fixed","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T20:22:24.701647-06:00","created_by":"kritoke","updated_at":"2026-01-07T20:22:24.701647-06:00"}
{"id":"carafe.cr-qot","title":"Address TODO in src/generator/files.cr:26","description":"TODO comment: 'Don't traverse hidden directories in the first place' needs to be implemented or removed","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:12.369491-06:00","created_by":"kritoke","updated_at":"2026-01-07T20:20:12.369491-06:00"}
{"id":"carafe.cr-tx0","title":"Fix block parameter name in src/processor/crinja.cr:61","description":"Line 61 has single-letter block param |r| that needs a descriptive name","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:10.247789-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:31:49.445151-06:00","closed_at":"2026-01-08T04:31:49.445151-06:00","close_reason":"Closed"}
{"id":"carafe.cr-ypn","title":"Fix broken Table of Contents (TOC) generation and rendering","description":"Table of Contents is not being generated correctly in carafe.cr\n\n## Issues Identified\n1. TOC generation code in layout.cr:523-532 uses `rendered_content` parameter which is always nil\n2. TOC plugin regex expects specific anchor format that may not match markd output\n3. TOC HTML structure is incomplete - missing wrapper elements (aside.sidebar__right, nav.toc, header)\n\n## Expected Behavior\nTOC should render as:\n\u003caside class=\"sidebar__right\"\u003e\n  \u003cnav class=\"toc\"\u003e\n    \u003cheader\u003e\u003ch4 class=\"nav__title\"\u003e\u003ci class=\"fas fa-file-alt\"\u003e\u003c/i\u003e On this page\u003c/h4\u003e\u003c/header\u003e\n    \u003cul class=\"toc__menu\"\u003e\n      \u003cli\u003e\u003ca href=\"#heading-id\"\u003eHeading Text\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#parent-heading\"\u003eParent\u003c/a\u003e\n        \u003cul\u003e\n          \u003cli\u003e\u003ca href=\"#child-heading\"\u003eChild Heading\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n      \u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/nav\u003e\n\u003c/aside\u003e\n\n## Implementation Tasks\n1. Move TOC generation from layout.cr to markdown.cr (after HTML rendering)\n2. Fix heading anchor parsing regex in carafe_toc.cr to match markd output\n3. Add complete HTML wrapper structure (aside/nav/header) to TocGenerator\n4. Add TOC as page variable for layout templates to access\n5. Add spec tests for TOC generation\n6. Use Playwright skill to verify rendered TOC in browser\n7. Run crystal-code-reviewer skill on all changes for idiomatic Crystal code\n\n## Files to Modify\n- src/processor/markdown.cr (add TOC generation here)\n- src/processor/layout.cr (remove broken TOC code, use page variable)\n- src/plugins/carafe_toc.cr (fix regex and add wrapper)\n- spec/processor/toc_spec.cr (create new spec file)","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-08T05:11:09.224496-06:00","created_by":"kritoke","updated_at":"2026-01-08T05:32:49.857531-06:00","closed_at":"2026-01-08T05:32:49.857531-06:00","close_reason":"Fixed TOC generation with auto-injection approach. CRITICAL: _includes directory gets wiped when remote theme loads, so TOC must be auto-injected into content rather than using include files. Implementation now auto-injects TOC HTML at beginning of content, working with Minimal Mistakes and other themes without modifications. Verified with Playwright: 9 TOC links, correct nested structure, working navigation."}
{"id":"carafe.cr-yq4","title":"Fix table of contents on posts where it says 'On this page'","description":"The table of contents section displaying 'On this page' on posts needs to be fixed","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T20:39:29.813514-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:45:25.964398-06:00","closed_at":"2026-01-08T04:45:25.964398-06:00","close_reason":"Closed"}
{"id":"carafe.cr-zi7","title":"Use short block notation in layout.cr:395","description":"src/processor/layout.cr:395 can use short block notation (\u0026.date) instead of { |r| r.date }","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T20:20:11.430481-06:00","created_by":"kritoke","updated_at":"2026-01-08T04:32:59.776098-06:00","closed_at":"2026-01-08T04:32:59.776098-06:00","close_reason":"Closed"}
